import{u as $,r as d,o as A,a as J,b as o,c as a,d as e,e as M,i as L,f as c,t as r,F as x,y as v,w as E,g as O,v as G,h,B as H,j as K,k as Q,n as W}from"./index-gQaYO5ct.js";import{u as X,b as Y,e as Z}from"./fillProfile-BtIfjwhZ.js";import{s as _,a as y,_ as q}from"./safeStoreRefs-BFQqCsTa.js";const ee={class:"min-h-screen bg-slate-950 text-slate-50 flex flex-col"},te={class:"bg-slate-900/80 backdrop-blur border-b border-white/10 px-6 py-4"},se={class:"max-w-6xl mx-auto flex items-center justify-between"},oe={class:"flex items-center gap-4"},ae={class:"flex items-center gap-3"},le={class:"text-sm"},re={class:"bg-slate-900/50 border-b border-white/10"},ie={class:"max-w-6xl mx-auto flex gap-1 px-6"},ne=["onClick"],de={class:"flex-1 p-6"},ce={class:"max-w-6xl mx-auto"},ue={key:0,class:"space-y-6"},me={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},be=["disabled"],pe={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},xe={key:0,class:"text-center py-8 text-slate-500"},ve={key:1,class:"grid gap-3"},he={class:"flex items-center gap-4"},_e={class:"font-medium"},fe={class:"flex items-center gap-3 text-xs text-slate-400"},ge={class:"font-mono bg-slate-700 px-2 py-0.5 rounded"},ye={class:"flex items-center gap-2"},we=["onClick"],ke=["onClick"],Se={key:1,class:"space-y-6"},Ce={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},Re={class:"flex items-center justify-between mb-4"},Me={class:"text-sm text-slate-400"},Ne={key:0,class:"text-center py-8 text-slate-500"},Pe={key:1,class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3"},De={class:"font-medium truncate"},Ve={class:"text-xs text-slate-400"},je={key:2,class:"space-y-6"},Be={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},Te={class:"flex items-center justify-between mb-4"},Ie={class:"text-sm text-slate-400"},Ue={key:0,class:"text-center py-8 text-slate-500"},ze={key:1,class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3"},Fe={class:"font-medium"},$e={class:"text-xs text-slate-400 mt-1"},Ae={key:3,class:"space-y-6"},Ge={__name:"MasterPanel",setup(Je){const w=$();_(X,"session");const k=_(K,"user"),N=_(Y,"battleMap"),P=_(Z,"fillProfile"),{nickname:D=d(""),avatar:V=d(null)}=y(k,"user"),{maps:f=d([])}=y(N,"battleMap"),{profiles:g=d([])}=y(P,"fillProfile"),u=d("rooms"),b=d(!1),m=d(""),i=d([]);A(()=>{k.initializeProfile();const l=localStorage.getItem("trip-master-rooms");if(l)try{i.value=JSON.parse(l)}catch{i.value=[]}});const j=async()=>{if(m.value.trim()){b.value=!0;try{const l=B(),t={id:l,name:m.value.trim(),createdAt:Date.now(),mapId:null};i.value.unshift(t),S(),w.push({name:"master-room",params:{roomId:l}})}finally{b.value=!1,m.value=""}}},B=()=>{const l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let p=0;p<6;p++)t+=l[Math.floor(Math.random()*l.length)];return t},S=()=>{localStorage.setItem("trip-master-rooms",JSON.stringify(i.value))},T=l=>{confirm("–£–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É?")&&(i.value=i.value.filter(t=>t.id!==l),S())},I=l=>{w.push({name:"master-room",params:{roomId:l}})},U=l=>new Date(l).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),z=[{id:"rooms",label:"–ö–æ–º–Ω–∞—Ç—ã",icon:"üö™"},{id:"maps",label:"–ö–∞—Ä—Ç—ã",icon:"üó∫Ô∏è"},{id:"profiles",label:"–ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏",icon:"üé≤"},{id:"assets",label:"–ê—Å—Å–µ—Ç—ã",icon:"üé®"}];return(l,t)=>{const p=J("router-link");return o(),a("div",ee,[e("header",te,[e("div",se,[e("div",oe,[M(p,{to:"/",class:"text-slate-400 hover:text-white transition"},{default:L(()=>[...t[1]||(t[1]=[Q(" ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é ",-1)])]),_:1}),t[2]||(t[2]=e("div",{class:"h-6 w-px bg-white/10"},null,-1)),t[3]||(t[3]=e("h1",{class:"text-xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent"}," ‚öîÔ∏è –ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞ ",-1))]),e("div",ae,[M(q,{avatar:c(V),size:32},null,8,["avatar"]),e("span",le,r(c(D)||"–ú–∞—Å—Ç–µ—Ä"),1)])])]),e("div",re,[e("div",ie,[(o(),a(x,null,v(z,s=>e("button",{key:s.id,type:"button",class:W(["px-4 py-3 text-sm transition border-b-2 -mb-px",u.value===s.id?"text-amber-400 border-amber-400":"text-slate-400 border-transparent hover:text-white"]),onClick:n=>u.value=s.id},r(s.icon)+" "+r(s.label),11,ne)),64))])]),e("main",de,[e("div",ce,[u.value==="rooms"?(o(),a("div",ue,[e("div",me,[t[4]||(t[4]=e("h2",{class:"text-lg font-semibold mb-4"},"–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É",-1)),e("form",{onSubmit:E(j,["prevent"]),class:"flex gap-3"},[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–º–ø–∞–Ω–∏—è –¥—Ä–∞–∫–æ–Ω–æ–≤)",class:"flex-1 px-4 py-2 bg-slate-800 border border-white/10 rounded-lg focus:outline-none focus:border-amber-400/50"},null,512),[[G,m.value]]),e("button",{type:"submit",class:"px-6 py-2 bg-amber-500 text-white font-medium rounded-lg hover:bg-amber-600 transition disabled:opacity-50",disabled:!m.value.trim()||b.value},r(b.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"+ –°–æ–∑–¥–∞—Ç—å"),9,be)],32)]),e("div",pe,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold mb-4"},"–í–∞—à–∏ –∫–æ–º–Ω–∞—Ç—ã",-1)),i.value.length===0?(o(),a("div",xe," –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–Ω–∞—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é! ")):(o(),a("div",ve,[(o(!0),a(x,null,v(i.value,s=>(o(),a("div",{key:s.id,class:"flex items-center justify-between p-4 bg-slate-800/50 border border-white/5 rounded-lg hover:border-white/20 transition"},[e("div",he,[t[5]||(t[5]=e("div",{class:"text-2xl"},"üéÆ",-1)),e("div",null,[e("h3",_e,r(s.name),1),e("div",fe,[e("span",ge,r(s.id),1),e("span",null,r(U(s.createdAt)),1)])])]),e("div",ye,[e("button",{type:"button",class:"px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg hover:bg-amber-500/30 transition",onClick:n=>I(s.id)}," –û—Ç–∫—Ä—ã—Ç—å ",8,we),e("button",{type:"button",class:"p-2 text-slate-400 hover:text-rose-400 transition",onClick:n=>T(s.id)}," üóëÔ∏è ",8,ke)])]))),128))]))])])):h("",!0),u.value==="maps"?(o(),a("div",Se,[e("div",Ce,[e("div",Re,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã",-1)),e("span",Me,r(c(f).length)+" –∫–∞—Ä—Ç",1)]),c(f).length===0?(o(),a("div",Ne," –ö–∞—Ä—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–æ–º–Ω–∞—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ ")):(o(),a("div",Pe,[(o(!0),a(x,null,v(c(f),s=>{var n,C,R;return o(),a("div",{key:s.id,class:"p-4 bg-slate-800/50 border border-white/5 rounded-lg"},[t[8]||(t[8]=e("div",{class:"aspect-video bg-slate-700 rounded mb-3 flex items-center justify-center text-4xl"}," üó∫Ô∏è ",-1)),e("h3",De,r(s.name),1),e("p",Ve,r(s.scale)+" ‚Ä¢ "+r(((R=(C=(n=s.layers)==null?void 0:n.find(F=>F.type==="terrain"))==null?void 0:C.data)==null?void 0:R.size)||0)+" –≥–µ–∫—Å–æ–≤ ",1)])}),128))]))])])):h("",!0),u.value==="profiles"?(o(),a("div",je,[e("div",Be,[e("div",Te,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold"},"–ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏",-1)),e("span",Ie,r(c(g).length)+" –ø—Ä–æ—Ñ–∏–ª–µ–π",1)]),c(g).length===0?(o(),a("div",Ue," –ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç—ã ")):(o(),a("div",ze,[(o(!0),a(x,null,v(c(g),s=>{var n;return o(),a("div",{key:s.id,class:"p-4 bg-slate-800/50 border border-white/5 rounded-lg"},[e("h3",Fe,r(s.name),1),e("p",$e," –ë–∞–∑–∞: "+r(s.baseTerrain)+" ‚Ä¢ "+r(((n=s.layers)==null?void 0:n.length)||0)+" —Å–ª–æ—ë–≤ ",1)])}),128))]))])])):h("",!0),u.value==="assets"?(o(),a("div",Ae,[...t[10]||(t[10]=[H('<div class="bg-slate-900/50 border border-white/10 rounded-xl p-6"><h2 class="text-lg font-semibold mb-4">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å—Å–µ—Ç–∞–º–∏</h2><div class="text-center py-8 text-slate-500"><div class="text-4xl mb-4">üé®</div><p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞—Å—Å–µ—Ç–æ–≤ ‚Äî –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p><p class="text-sm mt-2">–ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Ä—Ä–µ–π–Ω—ã</p></div></div>',1)])])):h("",!0)])])])}}};export{Ge as default};

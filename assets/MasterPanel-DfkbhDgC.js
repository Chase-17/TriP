import{u as F,a as U,s as f,r as x,o as $,b as J,c as o,d as a,e,f as R,j as L,g as d,t as r,F as p,p as v,w as E,h as O,v as G,i as h,A as H,k as K,x as Q}from"./index-L7RxxNVN.js";import{a as W,b as X,d as Y}from"./fillProfile-MI3lTrJm.js";import{_ as Z}from"./UserAvatar-BiZtdmcF.js";const q={class:"min-h-screen bg-slate-950 text-slate-50 flex flex-col"},ee={class:"bg-slate-900/80 backdrop-blur border-b border-white/10 px-6 py-4"},te={class:"max-w-6xl mx-auto flex items-center justify-between"},se={class:"flex items-center gap-4"},oe={class:"flex items-center gap-3"},ae={class:"text-sm"},le={class:"bg-slate-900/50 border-b border-white/10"},re={class:"max-w-6xl mx-auto flex gap-1 px-6"},ie=["onClick"],ne={class:"flex-1 p-6"},de={class:"max-w-6xl mx-auto"},ce={key:0,class:"space-y-6"},me={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},ue=["disabled"],be={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},xe={key:0,class:"text-center py-8 text-slate-500"},pe={key:1,class:"grid gap-3"},ve={class:"flex items-center gap-4"},he={class:"font-medium"},_e={class:"flex items-center gap-3 text-xs text-slate-400"},ge={class:"font-mono bg-slate-700 px-2 py-0.5 rounded"},fe={class:"flex items-center gap-2"},ye=["onClick"],we=["onClick"],ke={key:1,class:"space-y-6"},Se={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},Ce={class:"flex items-center justify-between mb-4"},Re={class:"text-sm text-slate-400"},Me={key:0,class:"text-center py-8 text-slate-500"},Ne={key:1,class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3"},De={class:"font-medium truncate"},Ve={class:"text-xs text-slate-400"},je={key:2,class:"space-y-6"},Pe={class:"bg-slate-900/50 border border-white/10 rounded-xl p-6"},Te={class:"flex items-center justify-between mb-4"},Be={class:"text-sm text-slate-400"},Ie={key:0,class:"text-center py-8 text-slate-500"},ze={key:1,class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3"},Ae={class:"font-medium"},Fe={class:"text-xs text-slate-400 mt-1"},Ue={key:3,class:"space-y-6"},Oe={__name:"MasterPanel",setup($e){const y=F();W();const w=U(),M=X(),N=Y(),{nickname:D,avatar:V}=f(w),{maps:_}=f(M),{profiles:g}=f(N),c=x("rooms"),u=x(!1),m=x(""),i=x([]);$(()=>{w.initializeProfile();const l=localStorage.getItem("trip-master-rooms");if(l)try{i.value=JSON.parse(l)}catch{i.value=[]}});const j=async()=>{if(m.value.trim()){u.value=!0;try{const l=P(),t={id:l,name:m.value.trim(),createdAt:Date.now(),mapId:null};i.value.unshift(t),k(),y.push({name:"master-room",params:{roomId:l}})}finally{u.value=!1,m.value=""}}},P=()=>{const l="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let b=0;b<6;b++)t+=l[Math.floor(Math.random()*l.length)];return t},k=()=>{localStorage.setItem("trip-master-rooms",JSON.stringify(i.value))},T=l=>{confirm("–£–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É?")&&(i.value=i.value.filter(t=>t.id!==l),k())},B=l=>{y.push({name:"master-room",params:{roomId:l}})},I=l=>new Date(l).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),z=[{id:"rooms",label:"–ö–æ–º–Ω–∞—Ç—ã",icon:"üö™"},{id:"maps",label:"–ö–∞—Ä—Ç—ã",icon:"üó∫Ô∏è"},{id:"profiles",label:"–ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏",icon:"üé≤"},{id:"assets",label:"–ê—Å—Å–µ—Ç—ã",icon:"üé®"}];return(l,t)=>{const b=J("router-link");return o(),a("div",q,[e("header",ee,[e("div",te,[e("div",se,[R(b,{to:"/",class:"text-slate-400 hover:text-white transition"},{default:L(()=>[...t[1]||(t[1]=[K(" ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é ",-1)])]),_:1}),t[2]||(t[2]=e("div",{class:"h-6 w-px bg-white/10"},null,-1)),t[3]||(t[3]=e("h1",{class:"text-xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent"}," ‚öîÔ∏è –ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞ ",-1))]),e("div",oe,[R(Z,{avatar:d(V),size:32},null,8,["avatar"]),e("span",ae,r(d(D)||"–ú–∞—Å—Ç–µ—Ä"),1)])])]),e("div",le,[e("div",re,[(o(),a(p,null,v(z,s=>e("button",{key:s.id,type:"button",class:Q(["px-4 py-3 text-sm transition border-b-2 -mb-px",c.value===s.id?"text-amber-400 border-amber-400":"text-slate-400 border-transparent hover:text-white"]),onClick:n=>c.value=s.id},r(s.icon)+" "+r(s.label),11,ie)),64))])]),e("main",ne,[e("div",de,[c.value==="rooms"?(o(),a("div",ce,[e("div",me,[t[4]||(t[4]=e("h2",{class:"text-lg font-semibold mb-4"},"–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É",-1)),e("form",{onSubmit:E(j,["prevent"]),class:"flex gap-3"},[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–º–ø–∞–Ω–∏—è –¥—Ä–∞–∫–æ–Ω–æ–≤)",class:"flex-1 px-4 py-2 bg-slate-800 border border-white/10 rounded-lg focus:outline-none focus:border-amber-400/50"},null,512),[[G,m.value]]),e("button",{type:"submit",class:"px-6 py-2 bg-amber-500 text-white font-medium rounded-lg hover:bg-amber-600 transition disabled:opacity-50",disabled:!m.value.trim()||u.value},r(u.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"+ –°–æ–∑–¥–∞—Ç—å"),9,ue)],32)]),e("div",be,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold mb-4"},"–í–∞—à–∏ –∫–æ–º–Ω–∞—Ç—ã",-1)),i.value.length===0?(o(),a("div",xe," –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–Ω–∞—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é! ")):(o(),a("div",pe,[(o(!0),a(p,null,v(i.value,s=>(o(),a("div",{key:s.id,class:"flex items-center justify-between p-4 bg-slate-800/50 border border-white/5 rounded-lg hover:border-white/20 transition"},[e("div",ve,[t[5]||(t[5]=e("div",{class:"text-2xl"},"üéÆ",-1)),e("div",null,[e("h3",he,r(s.name),1),e("div",_e,[e("span",ge,r(s.id),1),e("span",null,r(I(s.createdAt)),1)])])]),e("div",fe,[e("button",{type:"button",class:"px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg hover:bg-amber-500/30 transition",onClick:n=>B(s.id)}," –û—Ç–∫—Ä—ã—Ç—å ",8,ye),e("button",{type:"button",class:"p-2 text-slate-400 hover:text-rose-400 transition",onClick:n=>T(s.id)}," üóëÔ∏è ",8,we)])]))),128))]))])])):h("",!0),c.value==="maps"?(o(),a("div",ke,[e("div",Se,[e("div",Ce,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold"},"–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã",-1)),e("span",Re,r(d(_).length)+" –∫–∞—Ä—Ç",1)]),d(_).length===0?(o(),a("div",Me," –ö–∞—Ä—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–æ–º–Ω–∞—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ ")):(o(),a("div",Ne,[(o(!0),a(p,null,v(d(_),s=>{var n,S,C;return o(),a("div",{key:s.id,class:"p-4 bg-slate-800/50 border border-white/5 rounded-lg"},[t[8]||(t[8]=e("div",{class:"aspect-video bg-slate-700 rounded mb-3 flex items-center justify-center text-4xl"}," üó∫Ô∏è ",-1)),e("h3",De,r(s.name),1),e("p",Ve,r(s.scale)+" ‚Ä¢ "+r(((C=(S=(n=s.layers)==null?void 0:n.find(A=>A.type==="terrain"))==null?void 0:S.data)==null?void 0:C.size)||0)+" –≥–µ–∫—Å–æ–≤ ",1)])}),128))]))])])):h("",!0),c.value==="profiles"?(o(),a("div",je,[e("div",Pe,[e("div",Te,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold"},"–ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏",-1)),e("span",Be,r(d(g).length)+" –ø—Ä–æ—Ñ–∏–ª–µ–π",1)]),d(g).length===0?(o(),a("div",Ie," –ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ª–∏–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç—ã ")):(o(),a("div",ze,[(o(!0),a(p,null,v(d(g),s=>{var n;return o(),a("div",{key:s.id,class:"p-4 bg-slate-800/50 border border-white/5 rounded-lg"},[e("h3",Ae,r(s.name),1),e("p",Fe," –ë–∞–∑–∞: "+r(s.baseTerrain)+" ‚Ä¢ "+r(((n=s.layers)==null?void 0:n.length)||0)+" —Å–ª–æ—ë–≤ ",1)])}),128))]))])])):h("",!0),c.value==="assets"?(o(),a("div",Ue,[...t[10]||(t[10]=[H('<div class="bg-slate-900/50 border border-white/10 rounded-xl p-6"><h2 class="text-lg font-semibold mb-4">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å—Å–µ—Ç–∞–º–∏</h2><div class="text-center py-8 text-slate-500"><div class="text-4xl mb-4">üé®</div><p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞—Å—Å–µ—Ç–æ–≤ ‚Äî –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p><p class="text-sm mt-2">–ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Ä—Ä–µ–π–Ω—ã</p></div></div>',1)])])):h("",!0)])])])}}};export{Oe as default};
